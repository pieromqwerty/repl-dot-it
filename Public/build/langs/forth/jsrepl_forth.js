(function(){var h;h=5;self.JSREPLEngine=function(){function c(a,d,e,g,c,f){this.sandbox=c;this.inputting=this.finished=this.printed=false;this.lines=0;this.sandbox._init();this.sandbox._error=function(b){return function(a){b.finished=true;return g(a)}}(this);this.sandbox._print=function(b){return function(a){b.printed=true;return d(a)}}(this);this.sandbox._prompt=function(b){return function(){if(--b.lines===0&&!b.inputting&&!b.finished)return b.sandbox._finish()}}(this);this.sandbox._input=function(b){return function(d){if(!b.finished)return b.inputting=
true,a(function(a){var e,c,g;for(c=0,g=a.length;c<g;c++)e=a[c],b.sandbox.inbuf.push(e.charCodeAt(0));b.sandbox.inbuf.push(13);b.inputting=false;return d()})}}(this);this.sandbox._finish=function(b){return function(){var a;if(!b.finished)return b.sandbox.inbuf=[],a=b.sandbox._stacktop(h+1),a.length?(a.length>h&&(a[0]="..."),e(a.join(" "))):(b.printed&&d("\n"),e("")),b.finished=true}}(this);f()}c.prototype.Eval=function(a){this.inputting=this.finished=this.printed=false;this.lines=a.split("\n").length;
try{return this.sandbox._run(a)}catch(c){this.sandbox._error(c)}};c.prototype.EvalSync=function(){};c.prototype.GetNextLineIndent=function(a){var c;c=function(){return function(a){var c,d,f,b;c=0;f=a.split(/\s+/);for(a=0,d=f.length;a<d;a++)switch(b=f[a],b){case ":":++c;break;case ";":--c}return c}}(this);return c(a)<=0?false:(a=c(a.split("\n").slice(-1)[0]),a>0?1:a<0?a:0)};return c}()}).call(this);
