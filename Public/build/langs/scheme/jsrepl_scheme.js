(function(){self.JSREPLEngine=function(){function e(a,b,c,g,f,d){this.result=c;this.sandbox=f;c=this.sandbox.BiwaScheme.Port;c.current_input=new c.CustomInput(a);c.current_output=new c.CustomOutput(b);c.current_error=c.current_output;this.interpreter=new this.sandbox.BiwaScheme.Interpreter(g);d()}e.prototype.Eval=function(a){try{return this.interpreter.evaluate(a,function(c){return function(a){var b;if(a!==void 0)return b="",a!=null&&a!==c.sandbox.BiwaScheme.undef&&(b=c.sandbox.BiwaScheme.to_write(a)),
c.result(b)}}(this))}catch(b){return this.interpreter.on_error(b.message)}};e.prototype.EvalSync=function(a){var b;b=null;this.interpreter.evaluate(a,function(a){return b=a});return b};e.prototype.IsCommandComplete=function(a){var b,c,g,f,d;d=(new this.sandbox.BiwaScheme.Parser(a)).tokens;a=g=0;for(b=0,c=d.length;b<c;b++)switch(f=d[b],f){case "[":++a;break;case "]":--a;break;case "(":++g;break;case ")":--g}return g<=0&&a<=0};e.prototype.GetNextLineIndent=function(a){var b;b=function(a){return function(b){var f,
d,e,h;h=(new a.sandbox.BiwaScheme.Parser(b)).tokens;d=0;for(b=0,f=h.length;b<f;b++)switch(e=h[b],e){case "[":case "(":++d;break;case "]":case ")":--d}return d}}(this);return b(a)<=0?false:(a=b(a.split("\n").slice(-1)[0]),a>0?1:a<0?a:0)};return e}()}).call(this);
